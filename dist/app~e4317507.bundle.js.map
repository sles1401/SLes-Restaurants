{"version":3,"file":"app~e4317507.bundle.js","mappings":"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","sources":["webpack://restaurant-apps/./src/scripts/routes/routes.js","webpack://restaurant-apps/./src/scripts/routes/url-parser.js","webpack://restaurant-apps/./src/scripts/utils/drawer-initiator.js","webpack://restaurant-apps/./src/scripts/utils/like-button-initiator.js","webpack://restaurant-apps/./src/scripts/utils/sw-register.js","webpack://restaurant-apps/./src/scripts/utils/notification-helper.js","webpack://restaurant-apps/./src/scripts/utils/websocket-initiator.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\n/* eslint-disable import/no-cycle */\r\nimport Detail from '../views/pages/detail';\r\nimport Favorites from '../views/pages/like';\r\nimport Home from '../views/pages/home';\r\n\r\nconst routes = {\r\n    '/': Home,\r\n    '/detail/:id': Detail,\r\n    '/favorites': Favorites,\r\n};\r\n\r\nexport default routes;\r\n","const UrlParser = {\r\n    parseActiveUrlWithCombiner() {\r\n        const url = window.location.hash.slice(1).toLowerCase();\r\n        const splitedUrl = this._urlSplitter(url);\r\n        return this._urlCombiner(splitedUrl);\r\n    },\r\n\r\n    parseActiveUrlWithoutCombiner() {\r\n        const url = window.location.hash.slice(1).toLowerCase();\r\n        return this._urlSplitter(url);\r\n    },\r\n\r\n    _urlSplitter(url) {\r\n        const urlsSplits = url.split('/');\r\n        return {\r\n            resource: urlsSplits[1] || null,\r\n            id: urlsSplits[2] || null,\r\n            verb: urlsSplits[3] || null,\r\n        };\r\n    },\r\n\r\n    _urlCombiner(splitedUrl) {\r\n        return (splitedUrl.resource ? `/${splitedUrl.resource}` : '/')\r\n            + (splitedUrl.id ? '/:id' : '')\r\n            + (splitedUrl.verb ? `/${splitedUrl.verb}` : '');\r\n    },\r\n};\r\n\r\nexport default UrlParser;\r\n","const DrawerInitiator = {\r\n    init({ button, drawer, content }) {\r\n        button.addEventListener('click', (event) => {\r\n            this._toggleDrawer(event, drawer);\r\n        });\r\n\r\n        content.addEventListener('click', (event) => {\r\n            this._closeDrawer(event, drawer);\r\n        });\r\n    },\r\n\r\n    _toggleDrawer(event, drawer) {\r\n        event.stopPropagation();\r\n        drawer.classList.toggle('open');\r\n    },\r\n\r\n    _closeDrawer(event, drawer) {\r\n        event.stopPropagation();\r\n        drawer.classList.remove('open');\r\n    },\r\n};\r\n\r\nexport default DrawerInitiator;\r\n","/* eslint-disable no-unused-vars */\r\n/* eslint-disable import/named */\r\nimport {\r\n    createLikeRestaurantButtonTemplate,\r\n    createUnlikeRestaurantButtonTemplate,\r\n} from '../views/templates/template-creator';\r\n\r\nconst LikeButtonInitiator = {\r\n    async init({ likeButtonContainer, favoriteRestaurant, data }) {\r\n        this._likeButtonContainer = likeButtonContainer;\r\n        this._data = data;\r\n        this._favoriteRestaurant = favoriteRestaurant;\r\n\r\n        await this._renderButton();\r\n    },\r\n\r\n    async _renderButton() {\r\n        const { id } = this._data;\r\n\r\n        if (await this._isRestaurantExist(id)) {\r\n            this._renderLiked();\r\n        } else {\r\n            this._renderLike();\r\n        }\r\n    },\r\n\r\n    async _isRestaurantExist(id) {\r\n        const restaurant = await this._favoriteRestaurant.getRestaurant(id);\r\n        return !!restaurant;\r\n    },\r\n\r\n    _renderLike() {\r\n        this._likeButtonContainer.innerHTML = createLikeRestaurantButtonTemplate();\r\n\r\n        const likeButton = document.querySelector('#likeButton');\r\n        likeButton.addEventListener('click', async () => {\r\n            await this._favoriteRestaurant.putRestaurant(this._data);\r\n            this._renderButton();\r\n        });\r\n    },\r\n\r\n    _renderLiked() {\r\n        this._likeButtonContainer.innerHTML = createUnlikeRestaurantButtonTemplate();\r\n\r\n        const likeButton = document.querySelector('#likeButton');\r\n        likeButton.addEventListener('click', async () => {\r\n            await this._favoriteRestaurant.deleteRestaurant(this._data.id);\r\n            this._renderButton();\r\n        });\r\n    },\r\n};\r\n\r\nexport default LikeButtonInitiator;\r\n","import * as WorkboxWindow from 'workbox-window';\n\nconst swRegister = async () => {\n    if (!('serviceWorker' in navigator)) {\n        console.log('Service Worker not supported in the browser');\n        return;\n    }\n\n    const wb = new WorkboxWindow.Workbox('/sw.js');\n\n    try {\n        await wb.register();\n        console.log('Service worker registered');\n    } catch (error) {\n        console.log('Failed to register service worker', error);\n    }\n};\n\nexport default swRegister;\n","const NotificationHelper = {\r\n    sendNotification({ title, options }) {\r\n        if (!this._checkAvailability()) {\r\n            console.log('Notification not supported in this browser');\r\n            return;\r\n        }\r\n\r\n        if (!this._checkPermission()) {\r\n            console.log('User did not yet granted permission');\r\n            this._requestPermission();\r\n            return;\r\n        }\r\n\r\n        this._showNotification({ title, options });\r\n    },\r\n\r\n    _checkAvailability() {\r\n        return 'Notification' in window;\r\n    },\r\n\r\n    _checkPermission() {\r\n        return Notification.permission === 'granted';\r\n    },\r\n\r\n    async _requestPermission() {\r\n        const status = await Notification.requestPermission();\r\n\r\n        if (status === 'denied') {\r\n            console.log('Notification Denied');\r\n        }\r\n\r\n        if (status === 'default') {\r\n            console.log('Permission closed');\r\n        }\r\n    },\r\n\r\n    async _showNotification({ title, options }) {\r\n        const serviceWorkerRegistration = await navigator.serviceWorker.ready;\r\n        serviceWorkerRegistration.showNotification(title, options);\r\n    },\r\n};\r\n\r\nexport default NotificationHelper;\r\n","import NotificationHelper from './notification-helper';\r\n\r\nconst WebSocketInitiator = {\r\n    init(url) {\r\n        const webSocket = new WebSocket(url);\r\n        webSocket.onmessage = this._onMessageHandler;\r\n    },\r\n\r\n    _onMessageHandler(message) {\r\n        const restaurant = JSON.parse(message.data);\r\n\r\n        NotificationHelper.sendNotification({\r\n            title: `${restaurant.title}`,\r\n            options: {\r\n                body: restaurant.description,\r\n                image: `${restaurant.pictureId}`,\r\n            },\r\n        });\r\n    },\r\n};\r\n\r\nexport default WebSocketInitiator;\r\n"],"names":["Home","Detail","Favorites","parseActiveUrlWithCombiner","url","window","location","hash","slice","toLowerCase","splitedUrl","this","_urlSplitter","_urlCombiner","parseActiveUrlWithoutCombiner","urlsSplits","split","resource","id","verb","init","button","drawer","content","addEventListener","event","_toggleDrawer","_closeDrawer","stopPropagation","classList","toggle","remove","likeButtonContainer","favoriteRestaurant","data","_likeButtonContainer","_data","_favoriteRestaurant","_renderButton","_isRestaurantExist","_renderLiked","_renderLike","getRestaurant","restaurant","innerHTML","createLikeRestaurantButtonTemplate","document","querySelector","putRestaurant","createUnlikeRestaurantButtonTemplate","deleteRestaurant","navigator","console","log","wb","WorkboxWindow","register","sendNotification","title","options","_checkAvailability","_checkPermission","_showNotification","_requestPermission","Notification","permission","requestPermission","status","serviceWorker","ready","showNotification","WebSocket","onmessage","_onMessageHandler","message","JSON","parse","NotificationHelper","body","description","image","pictureId"],"sourceRoot":""}